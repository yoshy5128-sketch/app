<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚«ãƒ†ã‚´ãƒªåˆ¥ ã‚³ãƒ¼ãƒ‰ä½œæˆç”¨ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼ (æ¿ƒæ·¡ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ä»˜ã)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        h1 {
            color: #1a1a1a;
            text-align: center;
            margin-bottom: 30px;
        }
        /* --- ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ– --- */
        #category-tabs {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #ccc;
        }
        .tab-button {
            background-color: #e0e0e0;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.2s, color 0.2s;
            border-radius: 5px 5px 0 0;
            outline: none;
        }
        .tab-button:hover {
            background-color: #d5d5d5;
        }
        .tab-button.active {
            background-color: #007bff;
            color: white;
        }

        /* --- ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ --- */
        #color-palette {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            padding: 20px 0;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            min-height: 200px;
        }
        .color-swatch {
            height: 100px;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 10px;
            padding: 5px;
            box-sizing: border-box;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.7);
            transition: transform 0.1s, box-shadow 0.1s;
        }
        .color-swatch:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .color-swatch strong {
            font-size: 12px;
            line-height: 1.2;
        }

        /* --- é¸æŠè‰²æƒ…å ± --- */
        #selected-color-info {
            margin-top: 30px;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        #color-preview {
            width: 100%;
            height: 80px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        #code-output p {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f9f9f9;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
            font-weight: bold;
        }
        #code-output span {
            font-family: 'Consolas', 'Courier New', monospace;
            color: #333;
        }
        #code-output button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #code-output button:hover {
            background-color: #218838;
        }

        /* --- æ¿ƒæ·¡ãƒ‘ãƒ¬ãƒƒãƒˆ --- */
        #tone-palette-container {
            margin-top: 20px;
        }
        #tone-palette {
            display: flex;
            justify-content: space-between;
            overflow-x: auto;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .tone-swatch {
            min-width: 40px;
            height: 40px;
            flex-grow: 1;
            cursor: pointer;
            position: relative;
        }
        .tone-swatch:hover {
            opacity: 0.8;
        }
        .tone-swatch span {
            position: absolute;
            bottom: 2px;
            right: 2px;
            font-size: 8px;
            color: white;
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.9);
        }
    </style>
</head>
<body>

    <h1>ğŸ¨ ã‚«ãƒ†ã‚´ãƒªåˆ¥ ã‚³ãƒ¼ãƒ‰ä½œæˆç”¨ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼</h1>

    <div id="category-tabs">
        <button class="tab-button" data-category="rainbow">ğŸŒˆ ãƒ¬ã‚¤ãƒ³ãƒœãƒ¼</button>
        <button class="tab-button active" data-category="system">ã‚·ã‚¹ãƒ†ãƒ ã‚«ãƒ©ãƒ¼</button>
        <button class="tab-button" data-category="dark">ãƒ€ãƒ¼ã‚¯ç³»</button>
        <button class="tab-button" data-category="gray">ã‚°ãƒ¬ãƒ¼ç³»</button> 
        <button class="tab-button" data-category="pop">ãƒãƒƒãƒ—ç³»</button>
        <button class="tab-button" data-category="cool">ã‚¯ãƒ¼ãƒ«ç³»</button> <button class="tab-button" data-category="nuance">ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ç³»</button> 
        <button class="tab-button" data-category="warm">ã‚¦ã‚©ãƒ¼ãƒ ç³»</button>
        <button class="tab-button" data-category="earth">ã‚¢ãƒ¼ã‚¹ç³»</button>
    </div>

    <div id="color-palette">
        </div>

    <hr>

    <div id="selected-color-info">
        <h2>é¸æŠä¸­ã®è‰²</h2>
        <div id="color-preview" style="background-color: #FFFFFF;"></div>
        
        <div id="tone-palette-container">
            <h3>ğŸ¨ æ¿ƒæ·¡ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³</h3>
            <div id="tone-palette">
                </div>
        </div>

        <div id="code-output">
            <p>HEX: <span id="hex-code">#FFFFFF</span> <button onclick="copyCode('hex')">ã‚³ãƒ”ãƒ¼</button></p>
            <p>RGB: <span id="rgb-code">rgb(255, 255, 255)</span> <button onclick="copyCode('rgb')">ã‚³ãƒ”ãƒ¼</button></p>
            <p>HSL: <span id="hsl-code">hsl(0, 0%, 100%)</span> <button onclick="copyCode('hsl')">ã‚³ãƒ”ãƒ¼</button></p>
        </div>
    </div>

    <script>
        // ----------------------------------------------------
        // 1. ã‚«ãƒ©ãƒ¼ãƒ‡ãƒ¼ã‚¿å®šç¾© (ã‚¯ãƒ¼ãƒ«ç³»ã‚’æ‹¡å¼µ)
        // ----------------------------------------------------
        const colorData = {
            rainbow: [
                { name: "Red", hex: "#FF0000" }, { name: "Orange", hex: "#FFA500" }, { name: "Yellow", hex: "#FFFF00" },
                { name: "Green", hex: "#008000" }, { name: "Cyan", hex: "#00FFFF" }, { name: "Blue", hex: "#0000FF" },
                { name: "Indigo", hex: "#4B0082" }, { name: "Violet", hex: "#EE82EE" },
            ],
            system: [
                { name: "Success (ç·‘)", hex: "#28A745" }, { name: "Error (èµ¤)", hex: "#DC3545" },
                { name: "Info (é’)", hex: "#007BFF" }, { name: "Warning (é»„)", hex: "#FFC107" },
            ],
            dark: [
                { name: "Navy Blue", hex: "#0A1931" }, { name: "Charcoal", hex: "#333333" },
                { name: "Bordeaux", hex: "#800020" }, { name: "Deep Emerald", hex: "#00533C" },
            ],
            gray: [
                { name: "ãƒ©ã‚¤ãƒˆã‚°ãƒ¬ãƒ¼", hex: "#F2F2F2" },
                { name: "ã‚·ãƒ«ãƒãƒ¼", hex: "#CCCCCC" },
                { name: "ãƒŸãƒ‡ã‚£ã‚¢ãƒ ã‚°ãƒ¬ãƒ¼", hex: "#999999" },
                { name: "ã‚¹ãƒ¬ãƒ¼ãƒˆã‚°ãƒ¬ãƒ¼", hex: "#666666" },
                { name: "ãƒãƒ£ã‚³ãƒ¼ãƒ«", hex: "#444444" },
                { name: "é»’ (ãƒ–ãƒ©ãƒƒã‚¯)", hex: "#000000" },
            ],
            pop: [
                { name: "Shocking Pink", hex: "#FF1493" }, { name: "Vivid Yellow", hex: "#FFEB3B" },
                { name: "Electric Blue", hex: "#00FFFF" }, { name: "Lime Green", hex: "#32CD32" },
            ],
            // æ‹¡å¼µ: ã‚¯ãƒ¼ãƒ«ç³»
            cool: [
                { name: "Ice Blue", hex: "#ADD8E6" }, 
                { name: "Royal Blue", hex: "#4169E1" },
                { name: "ãƒ†ã‚£ãƒ¼ãƒ«", hex: "#008080" }, // NEW
                { name: "ãƒ‘ã‚¦ãƒ€ãƒ¼ãƒ–ãƒ«ãƒ¼", hex: "#B0E0E6" }, // NEW
                { name: "ãƒŸãƒƒãƒ‰ãƒŠã‚¤ãƒˆãƒ–ãƒ«ãƒ¼", hex: "#191970" }, // NEW (ãƒ€ãƒ¼ã‚¯ç³»ã¨é‡è¤‡ã—ãªã„ã‚ˆã†ã«æ³¨æ„)
            ],
            nuance: [
                { name: "ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ãƒ”ãƒ³ã‚¯", hex: "#D8BFD8" }, 
                { name: "ãƒ€ã‚¹ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼", hex: "#A9BCD6" }, 
                { name: "ã‚»ãƒ¼ã‚¸ã‚°ãƒªãƒ¼ãƒ³", hex: "#B2AC88" },
                { name: "ãƒ¢ãƒ¼ãƒ–", hex: "#996699" },
            ],
            warm: [
                { name: "Terracotta", hex: "#E2725B" }, 
                { name: "Mustard", hex: "#FFD700" },
                { name: "ã‚¢ãƒ—ãƒªã‚³ãƒƒãƒˆ", hex: "#FBCEB1" }, 
                { name: "ãƒ©ã‚¹ãƒ†ã‚£ãƒ¬ãƒƒãƒ‰", hex: "#8B0000" }, 
            ],
            earth: [
                { name: "Moss Green", hex: "#8A9A5B" }, 
                { name: "Khaki", hex: "#C3B091" },
                { name: "ã‚»ãƒ”ã‚¢", hex: "#704214" }, 
                { name: "ãƒ™ãƒ¼ã‚¸ãƒ¥", hex: "#F5F5DC" }, 
            ]
        };

        // DOMè¦ç´ ã®å–å¾—
        const palette = document.getElementById('color-palette');
        const preview = document.getElementById('color-preview');
        const hexOutput = document.getElementById('hex-code');
        const rgbOutput = document.getElementById('rgb-code');
        const hslOutput = document.getElementById('hsl-code');
        const tonePalette = document.getElementById('tone-palette'); 
        
        // ----------------------------------------------------
        // 2. ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
        // ----------------------------------------------------

        function hexToRgb(hex) {
            const bigint = parseInt(hex.slice(1), 16);
            const r = (bigint >> 16) & 255;
            const g = (bigint >> 8) & 255;
            const b = bigint & 255;
            return `rgb(${r}, ${g}, ${b})`;
        }

        function hexToHslArray(hex) {
            let r = 0, g = 0, b = 0;
            if (hex.length === 4) {
                r = parseInt(hex[1] + hex[1], 16);
                g = parseInt(hex[2] + hex[2], 16);
                b = parseInt(hex[3] + hex[3], 16);
            } else if (hex.length === 7) {
                r = parseInt(hex.substring(1, 3), 16);
                g = parseInt(hex.substring(3, 5), 16);
                b = parseInt(hex.substring(5, 7), 16);
            }
            r /= 255, g /= 255, b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return [h * 360, s * 100, l * 100];
        }

        function hslToHex(h, s, l) {
            h /= 360;
            s /= 100;
            l /= 100;
            let r, g, b;
            if (s === 0) {
                r = g = b = l; 
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1 / 6) return p + (q - p) * 6 * t;
                    if (t < 1 / 2) return q;
                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
                    return p;
                };
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1 / 3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1 / 3);
            }
            const toHex = x => {
                const hex = Math.round(x * 255).toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            };
            return `#${toHex(r)}${toHex(g)}${toHex(b)}`.toUpperCase();
        }
        
        // ----------------------------------------------------
        // 3. ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½
        // ----------------------------------------------------

        function renderPalette(categoryKey) {
            palette.innerHTML = '';
            const colors = colorData[categoryKey] || [];

            colors.forEach(color => {
                const swatch = document.createElement('div');
                swatch.className = 'color-swatch';
                swatch.style.backgroundColor = color.hex;
                
                // æ˜ã‚‹ã•ã«å¿œã˜ã¦ãƒ†ã‚­ã‚¹ãƒˆã®è‰²ã‚’æ±ºå®š
                const rgbMatch = hexToRgb(color.hex).match(/\d+/g);
                const r = parseInt(rgbMatch[0]);
                const g = parseInt(rgbMatch[1]);
                const b = parseInt(rgbMatch[2]);
                const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
                swatch.style.color = luminance > 0.5 ? '#333' : 'white';
                
                swatch.innerHTML = `<strong>${color.name}</strong><br>${color.hex}`;
                
                // ã‚¯ãƒªãƒƒã‚¯ã§ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨æ¿ƒæ·¡ãƒ‘ãƒ¬ãƒƒãƒˆã‚’æ›´æ–°
                swatch.addEventListener('click', () => {
                    updateSelectedColor(color.hex);
                    renderTonePalette(color.hex);
                });
                palette.appendChild(swatch);
            });
        }

        // æ¿ƒæ·¡ãƒ‘ãƒ¬ãƒƒãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderTonePalette(baseHex) {
            tonePalette.innerHTML = '';
            let [h, s, l] = hexToHslArray(baseHex);
            
            // ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ç³»ã‚„ã‚°ãƒ¬ãƒ¼ç³»ãªã©å½©åº¦ãŒä½ã„è‰²ã¯ã€æ¿ƒæ·¡ã‚’å‡ºã™ãŸã‚ã«Sã‚’å°‘ã—ãƒ–ãƒ¼ã‚¹ãƒˆã™ã‚‹
            if (s > 0 && s < 20) {
                 s = 20;
            }
            
            // æ¿ƒæ·¡ã‚¹ã‚±ãƒ¼ãƒ« (æ˜åº¦: 90% ã‹ã‚‰ 10%ã¾ã§9æ®µéš)
            const lightnessScale = [90, 80, 70, 60, 50, 40, 30, 20, 10]; 

            lightnessScale.forEach((newLightness, index) => {
                const toneHex = hslToHex(h, s, newLightness);
                
                const swatch = document.createElement('div');
                swatch.className = 'tone-swatch';
                swatch.style.backgroundColor = toneHex;
                swatch.title = `L: ${newLightness}% | ${toneHex}`;
                
                swatch.innerHTML = `<span>${newLightness}%</span>`; 
                
                // æ¿ƒæ·¡ã‚¹ã‚¦ã‚©ãƒƒãƒã®ã‚¯ãƒªãƒƒã‚¯ã§ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›´æ–°
                swatch.addEventListener('click', () => updateSelectedColor(toneHex));
                tonePalette.appendChild(swatch);
            });
        }

        function updateSelectedColor(hex) {
            preview.style.backgroundColor = hex;
            hexOutput.textContent = hex;
            
            // HSLã‚’(H%, S%, L%)å½¢å¼ã§è¡¨ç¤ºã™ã‚‹ãŸã‚ã«å¤‰æ›
            const [h, s, l] = hexToHslArray(hex).map(Math.round);
            hslOutput.textContent = `hsl(${h}, ${s}%, ${l}%)`; 
            
            rgbOutput.textContent = hexToRgb(hex);
        }

        function switchCategory(event) {
            const tabButtons = document.querySelectorAll('.tab-button');
            const categoryKey = event.target.getAttribute('data-category');
            
            // activeã‚¯ãƒ©ã‚¹ã®åˆ‡ã‚Šæ›¿ãˆ
            tabButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            renderPalette(categoryKey);
            // ã‚«ãƒ†ã‚´ãƒªåˆ‡ã‚Šæ›¿ãˆæ™‚ã€æ¿ƒæ·¡ãƒ‘ãƒ¬ãƒƒãƒˆã¯ã‚¯ãƒªã‚¢
            tonePalette.innerHTML = '';
        }
        
        window.copyCode = (format) => {
            let codeToCopy;
            switch(format) {
                case 'hex': codeToCopy = hexOutput.textContent; break;
                case 'rgb': codeToCopy = rgbOutput.textContent; break;
                case 'hsl': codeToCopy = hslOutput.textContent; break;
                default: return;
            }
            
            navigator.clipboard.writeText(codeToCopy).then(() => {
                alert(`${format.toUpperCase()}ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ: ${codeToCopy}`);
            }).catch(err => {
                console.error('ã‚³ãƒ”ãƒ¼å¤±æ•—:', err);
                alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
            });
        };

        // 4. å®Ÿè¡Œã‚³ãƒ¼ãƒ‰
        (function init() {
            const tabButtons = document.querySelectorAll('.tab-button');
            
            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
            tabButtons.forEach(button => {
                button.addEventListener('click', switchCategory);
            });
            
            // åˆå›è¡¨ç¤º: 'system' ã‚«ãƒ†ã‚´ãƒªã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
            renderPalette('system'); 
            
            // åˆæœŸé¸æŠè‰²ã‚’è¨­å®š
            updateSelectedColor("#FFFFFF"); 
            tonePalette.innerHTML = '';
        })();

    </script>

</body>
</html>
